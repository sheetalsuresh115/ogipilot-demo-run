<turbo-frame id="session_form">
    <div class="container">
        <div class="row">
            <div class="col-md-8 offset-md-2 mt-5 fancy-forms">
                <div class="text-end">
                    <%= button_to new_ogi_pilot_session_path, method: :get, class: "btn" do%>
                    <h1><i class="bi bi-building-fill-add"></i></h1>
                    <% end %>
                </div>
                <ul class="nav nav-tabs  mt-3" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link" id="publish_subscribe" data-toggle="tab" href="#"  data-url="publish_subscribe" role="tab" aria-controls="publish_subscribe" aria-selected="false">Publish Subscribe</a>
                    </li>
                </ul>
                <% if @sessions.present? %>
                    <div class="container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Session Id</th>
                                    <th>Channel</th>
                                    <th>Topic</th>
                                    <th>End Point</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% @sessions.each do |session| %>
                                    <tr>
                                        <td><%= session.id %></td>
                                        <td><%= session.channel %></td>
                                        <td><%= session.topic %></td>
                                        <td><%= session.end_point %></td>
                                        <td>
                                            <% if session.provider_session_id.present? %>
                                                <%= button_to close_ogi_pilot_session_path(session), method: :get, class: "btn" do%>
                                                    <h4><i class="bi bi-door-open-fill"></i></h4>
                                                <% end %>
                                            <% else %>
                                                <%= button_to open_ogi_pilot_session_path(session), method: :get, class: "btn" do%>
                                                    <h4><i class="bi bi-door-closed-fill"></i></h4>
                                                <% end %>
                                            <% end %>
                                            <%= link_to edit_ogi_pilot_session_path(session) do %>
                                                <i class="bi bi-pencil"></i>
                                            <% end %>
                                            <%= link_to ogi_pilot_session_path(session), data: { turbo_method: :delete,
                                                turbo_confirm: "Are you sure?" } do %>
                                                <i class="bi bi-trash"></i>
                                            <% end %>
                                        </td>
                                    </tr>
                                <% end %>
                            </tbody>
                        </table>
                    </div>
                <% end %>
                <div class="text-center">
                    <%= link_to "Back", :back %>
                </div>
            </div>
        </div>
    </div>
</turbo-frame>